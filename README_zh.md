# ESP01S WiFi ESP-NOW无线串口 📶

本项目展示了如何使用 **ESP01S** 模块和 **ESP-NOW** 协议在两个设备之间进行无线通信。这是一种简单而高效的数据传输方式，无需完整的 Wi-Fi 连接。

---

## 🌟 特性

- **无线通信**：利用 ESP-NOW 协议进行快速高效的数据传输。
- **串口接口**：通过串口监视器发送数据，数据将通过无线方式传输。
- **自动 MAC 地址检测**：自动打印设备的 MAC 地址，方便对等设备配置。
- **频道 14**：使用频道 14，该频道较少拥挤（除日本外）。

---

## 🛠️ 硬件需求

- **ESP01S 模块** × 2
- **USB 转串口模块**（用于编程和串口通信）
- **面包板和跳线**（可选，用于原型设计）

---

## 🚀 快速开始

### 1. 安装依赖库

确保在 Arduino IDE 中安装了以下库：

- [WiFiEspNow](https://github.com/raphaelbs/esp-now-wifi-esp8266)
- [ESP8266WiFi](https://github.com/esp8266/Arduino)

你可以通过 Arduino 库管理器安装它们。

### 2. 配置 MAC 地址

每个设备需要知道另一个设备的 MAC 地址才能进行通信。按照以下步骤操作：

1. 将代码上传到两个设备。
2. 打开 **串口监视器** (`Ctrl+Shift+M`)，波特率设置为 `115200`。
3. 记下每个设备上打印的 MAC 地址。
4. 在代码中更新 `PEER[]` 数组，填入另一个设备的 MAC 地址。

```cpp
// 示例：用另一个设备的 MAC 地址替换此数组
static uint8_t PEER[] {0xEA, 0x9F, 0x6D, 0x83, 0xD4, 0x91};
```

### 3. 上传代码

- 将代码上传到两个 ESP01S 模块。
- 确保两个设备使用相同的 **WiFi 频道**（默认为 `14`）。

### 4. 测试通信

- 打开两个设备的 **串口监视器**。
- 在一个设备的串口监视器中输入消息并按 `Enter`。
- 消息应出现在另一个设备的串口监视器中。

---

## 📝 代码说明

### 主要函数

- **`SetAP()`**：将 ESP01S 配置为 AP 模式，并设置 WiFi 频道。
- **`Init_ESP_NOW()`**：初始化 ESP-NOW 协议并添加对等设备。
- **`Send_data(String str)`**：通过 ESP-NOW 向对等设备发送数据。
- **`printReceivedMessage()`**：处理接收到的数据的回调函数。
- **`Handler(String read_data)`**：处理接收到的数据并将其打印到串口监视器。

---

## 🔧 配置

### 更改 WiFi 频道

如果你想使用不同的 WiFi 频道，可以修改 `channel` 变量：

```cpp
const uint8_t channel = 14; // 更改为所需的频道
```

### 调整数据长度

最大数据长度设置为 `60` 个字符。你可以通过修改 `Send_data()` 函数中的 `data` 数组大小来增加此值：

```cpp
char data[60]; // 如果需要，可以增加此值
```

---

## 📚 使用示例

1. **设备 A** 发送消息：
   ```
   Hello from Device A!
   ```

2. **设备 B** 接收消息：
   ```
   Hello from Device A!
   ```

---

## 📋 注意事项

- **频道 14**：此频道在日本以外地区不常用，因此非常适合避免干扰。不过，蓝牙设备可能仍会使用此频道。
- **MAC 地址**：每个 ESP01S 都有唯一的 MAC 地址。确保在 `PEER[]` 数组中填入正确的对等设备的 MAC 地址。
- **错误处理**：如果 ESP-NOW 初始化失败，设备将自动重启。

---

## 🤝 贡献

欢迎 fork 本仓库并提交 pull request！任何贡献或改进都欢迎。😊

---

## 📜 许可证

本项目采用 **GPL 许可证**。有关详细信息，请参阅 [LICENSE](LICENSE) 文件。

---

## 🙏 致谢

- 感谢 [WiFiEspNow](https://github.com/raphaelbs/esp-now-wifi-esp8266) 库的创建者，使 ESP-NOW 易于在 ESP8266 上使用。
